export function formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e4?(e/1e3).toFixed(1)+"k":e.toLocaleString()}export function getTimeAgo(e){const t=new Date-new Date(e),r=Math.floor(t/1e3),n=Math.floor(r/60),o=Math.floor(n/60),a=Math.floor(o/24),i=Math.floor(a/30),s=Math.floor(a/365);return s>0?s+"y":i>0?i+"m":a>0?a+"d":o>0?o+"h":n+"m"}export function countComments(e){let t=0;return e.forEach((e=>{t++,e.replies&&Array.isArray(e.replies)&&(t+=e.replies.length)})),t}export function getUrlParameter(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}export async function xhrSend(e,t,r){return new Promise(((n,o)=>{var a=new XMLHttpRequest;a.open(e,t,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var e=a.responseText.trim();if(e.startsWith("[]")){var t=e.substring(2).trim(),r=JSON.parse(t);n(r)}else{r=JSON.parse(e);n(r)}}else o(a.statusText)},a.send(r)}))}export function testInternetSpeed(){return new Promise(((e,t)=>{const r=(new Date).getTime(),n=new Image;n.onload=function(){const t=((509064/(((new Date).getTime()-r)/1e3)).toFixed(2)/1024).toFixed(2);e(t)},n.onerror=function(e){t(e)},n.src="../img/360-low.jpg?n="+Math.random()}))}