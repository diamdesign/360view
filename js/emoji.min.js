export function installEmoji(t){(null===t?document.getElementById("emojiplugin"):document.getElementById(t)).innerHTML='<textarea\n\t\t\t\tid="commentInputField"\n\t\t\t\trows="1"\n\t\t\t\tstyle="resize: none; overflow-y: hidden"\n\t\t\t\tplaceholder="Write your comment"\n\t\t\t></textarea>\n\t\t\t<button id="emojiButton">ðŸ˜€</button>\n\t\t\t<div id="emojiContainer">\n\t\t\t\t<input type="text" id="searchInput" placeholder="Search for emojis..." />\n\t\t\t\t<div id="emojiList"></div>\n\t\t\t</div>';const e=document.getElementById("commentInputField"),n=document.getElementById("emojiButton"),o=document.getElementById("searchInput"),i=document.getElementById("emojiContainer"),l=document.getElementById("emojiList");let c;function d(t,e,n){for(let o=t;o<Math.min(t+e,n.length);o++){const t=n[o],e=document.createElement("button");e.innerText=t,e.addEventListener("click",(()=>s(t))),l.appendChild(e)}}function s(t){let n=e.value;const o=(n.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[]).length;n.length+o<200&&(e.value+=t,r())}function r(){parseInt(window.getComputedStyle(e).lineHeight);for(e.style.height="auto",e.style.overflowY="hidden",e.rows=1;e.scrollHeight>e.clientHeight&&e.rows<=12;)e.rows++;e.rows>12&&(e.style.overflowY="auto",e.rows=12)}n.addEventListener("click",(async()=>{if("block"===i.style.display)return i.style.display="none",void e.focus();{l.innerHTML="",await async function(){try{const t=await fetch("../data/emoji-en-US.json");c=await t.json()}catch(t){console.error("Error fetching emojis:",t)}}();const t=Object.keys(c),e=80;let n=0;d(n,e,t),i.style.display="block";document.querySelector("#searchInput").focus(),l.addEventListener("scroll",(function(){l.scrollTop+l.clientHeight>=l.scrollHeight&&(n+=e,d(n,e,t))}))}})),o.addEventListener("input",(function(){const t=o.value.trim().toLowerCase();l.innerHTML="";for(let e in c)if(e.includes(t)||c[e].some((e=>e.includes(t)))){const t=document.createElement("button");t.innerText=e,t.addEventListener("click",(()=>s(e))),l.appendChild(t)}})),e.addEventListener("input",(function(){let t=e.value;const o=(t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[]).length,l=t.length+o;l>200&&(e.value=t.slice(0,200-o)),r(),l>=200?(n.disabled=!0,i.style.display="none"):n.disabled=!1}))}